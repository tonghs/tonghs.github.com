I"6<h3 id="dockerfile-build-image">dockerfile build image</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker build -t tonghs:tag .
</code></pre></div></div>

<h3 id="从-image-创建-container">从 image 创建 container</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -dt --name xxx imageid -p 2200:22 -p 8080:80
</code></pre></div></div>

<h3 id="debian-中文乱码">debian 中文乱码</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sudo apt-get install locales
dpkg-reconfigure locales
</code></pre></div></div>

<h3 id="端口映射和-iptables">端口映射和 iptables</h3>

<p>列出nat表的所有规则并显示行号</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables -nvL  -t nat --line-number
</code></pre></div></div>

<p>删除nat表DOCKER链的第13行的规则</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables -t nat -D DOCKER 13
</code></pre></div></div>

<p>用iptables给Docker添加端口映射</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>iptables -t nat -A DOCKER --in-interface !docker0 -p tcp --dport 6666 -j DNAT --to 172.17.0.5:6666
</code></pre></div></div>

<p>docker会在系统中创建一个叫docker0的网卡，本例中172.17.0.5就是docker0的IP地址</p>

<h3 id="容器导出到-tar">容器导出到 tar</h3>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker export xxx &gt; xxx.tar
</code></pre></div></div>

<h3 id="导入">导入</h3>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cat xxx.tag | docker import - ac-sys/redmine
</code></pre></div></div>
:ET