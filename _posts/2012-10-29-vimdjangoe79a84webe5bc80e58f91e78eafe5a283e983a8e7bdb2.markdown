---
author: ths
comments: true
date: 2012-10-29 06:21:00+00:00
layout: post
slug: vimdjango%e7%9a%84web%e5%bc%80%e5%8f%91%e7%8e%af%e5%a2%83%e9%83%a8%e7%bd%b2
title: VIM,Django的web开发环境部署
wordpress_id: 947
categories:
- 技术
tags:
- Django
- vim
---

[http://acheron.iteye.com/blog/394654](http://acheron.iteye.com/blog/394654)





GAE,VIM,Django,pysmell,snippetsEmu,ctags,taglist的web开发环境部署 





你能从本文了解到: 





1. 配置vim代码补全 





2. vim下pysmell和snippetsEmu配置与使用 





3. vim下django项目部署 





4. ctags与taglist配置与使用 





![](http://acheron.iteye.com/upload/attachment/107165/c456ee07-af30-385c-880b-d9aa01019b69.png)





关键词:vim python自动补全 Django代码补全 





运行环境: 





操作系统：windows XP SP2。 





python：Python2.5.4 





vim：gvim 7.2，python编译版 





ctags+taglist：语法分析，生成和显示tag点。 





Web framework: Django1.02 





上月因为GAE支持java,所以注册了一下玩玩 





虽然不知道google为什么把python捧的那么高的地位 





闲着没事,就学学python了 





谈到开发环境,就试了好几个 





这次就说说vim了 





整天谈论ide的developer技术水平的确不敢恭维 





个人还是想复习一下vi ,呵呵, 





或许将来的某一天,能过成为键盘高手,哈哈 





顺便show油箱: mda#foxmail+com 





任何问题可以互相讨论 





言归正传 





下载与安装python2.5.4 





http://www.python.org/download/ 





双击安装就可以 





如果你是python新手 





那些这个document请加到收藏夹 





http://docs.python.org/tutorial/ 





下载和安装gvim: [http://vim.sourceforge.net/download.php](http://vim.sourceforge.net/download.php)





Vim是Linux上的著名的文本编辑器，他是早年的Vi编辑器的加强版。这个gVim是windows版的，并且有了标准的windows风格的图形界面，所以叫g(graphical)Vim。 





这里附上一个vim的document 





[http://vimcdoc.sourceforge.net/doc/](http://vimcdoc.sourceforge.net/doc/)





这个东西很好,看看吧 





vim7中:version一下，看看feature中是否有+python，如果这里是-python，那就是你没有打开vim7对python的支持，要重新编译了 





当然,如果觉得麻烦, 





可以到下面下载别人对应的编译版本 





http://www.gooli.org/blog/category/python/ 





这个是blog链接 





会不会过几天失效我就不知道了,呵呵 





本文结尾提供链接给大家下载 





这回再:version一下，应该看到+python了 





现在Vim的界面和字体都是默认 





作为自己的工作环境 





还是根据自己需要调整一下吧 





这个步骤不是必要 





但建议读者试试 





使用 ClearType 增强屏幕字体 





来自microsoft官方 





http://www.microsoft.com/downloads/details.aspx?familyid=B15774C0-5B42-48B4-8BA8-9293FDC72099&displaylang=zh-cn 





英文：使用macOS的Courier_new字体 





中文：微软雅黑（需要特定编译版本），行宋体，幼圆 等比较舒服 





文章结尾提供下载链接 





配置字体，在vim安装目录的_vimrc文件中加入 





set guifont=Courier_New:h11:cANSI 





set guifontwide=新宋体:h11:cGB2312 





本文结尾提供已经配置好的完整_vimrc链接给大家下载 





Pysmell安装 





安装pysmell前需要安装setuptools支持 





下载网址：[http://pypi.python.org/pypi/setuptools](http://pypi.python.org/pypi/setuptools)





Linux，Mac等系统安装查看下载说明 





Windows版本安装只需要下载exe安装包双击安装就可以了 





然后下载pysmell 





http://code.google.com/p/pysmell/ 





[http://github.com/orestis/pysmell/tree/master](http://github.com/orestis/pysmell/tree/master)





windows cmd下运行python setup.py install





把pysmell.vim复制到vim安装目录的/plugin下，然后，再修改vimrc中的python的omnicomplete用pysmell 





方法： 





vimrc中加入autocmd FileType python setlocal omnifunc=pysmell#Complete





到python2.5的安装目录，生成Python的标准库的tags： 





pysmell . -x site-package test -o PYSMELLTAGES.pythonlib; 





同理生成django，可以到python安装目录下的lib / site-package/django 





pysmell . -o PYSMELLTAGES.django 





如果下载了django的安装包/源码包,可以在其bin目录生成 





关于GAE和Django的安装和配置 





就比较简单了, 





简单提一提 





GAE下载安装就可以, 





[http://code.google.com/intl/en/appengine/downloads.html](http://code.google.com/intl/en/appengine/downloads.html)





另一个下载点有最新版本 





奇怪,上面那个一直不更新老掉牙了 





试试这个[http://code.google.com/p/googleappengine/downloads/list](http://code.google.com/p/googleappengine/downloads/list)





Django 





下载后安装命令 





Python setup.py install 





Vim对django的支持官方文档 





[http://code.djangoproject.com/wiki/UsingVimWithDjango](http://code.djangoproject.com/wiki/UsingVimWithDjango)





然后把pysmell生成的文件复制到你项目目录之下 





更加需要,可以把你项目源码也生成 





然后你项目目录下编辑py文件时候, 





就会自动感应补全了 





ctrl+X/O就可以看到IDE中的代码提示 





另一个pysmell相关网址http://code.google.com/p/pysmell/ 





Snippetsemu让你的vim拥有模板功能 





什么是模板功能,很多ide都支持类似输入for就出现 





for( 口;口;口){ 





口; 





}的模板, 





这个插件就是这样类似的功能 





Snippetsemu安装配置 





[http://www.vim.org/scripts/script.php?script_id=1318](http://www.vim.org/scripts/script.php?script_id=1318)





安装SnippetsEmu的过程也比较容易，到它的主页下载三个vba文件(根据版本不同,有的版本有补丁安装)，用vim打开，运行:os %，就可以安装好了。 





然后，再去[http://code.djangoproject.com/wiki/UsingVimWithDjango](http://code.djangoproject.com/wiki/UsingVimWithDjango)





下部的urls和views的vim文件，复制到vim安装目录的ftplugin文件夹下。 





django_url_snippets.vim 和django_view_snippets.vim 文件 





关于Snippetsemu的加载 





参考这个网址: 





http://www.rosenville.com/blog/manually-loading-snippetsemus-django-snippets 





字数不多,我还是贴出来 





To manually load SnippetsEmu’s Django model and template snippets, I run the following command in Vim: 





:runtime! ftplugin/django_*_snippets.vim 





Following the Using Vim with Django guide, I added the following lines to my python.vim file: 





if getline(1) =~ 'from django.db import models' 





runtime! ftplugin/django_model_snippets.vim 





endif 





filetypes.vim detects django templates as the filetype htmldjango, so all that needs to be done to enable the template snippets is to rename django_template_snippets.vim to htmldjango.vim. Creating htmldjango.vim with the one-liner 





runtime! ftplugin/django_template_snippets.vim 





has the same effect. 





最简单的一句话总结 





只要把runtime! ftplugin/django_*_snippets.vim加到vimrc中就可以了 





snippetsemu的一些支持, 





[http://snippetsemu.googlecode.com/svn/trunk/after/ftplugin/](http://snippetsemu.googlecode.com/svn/trunk/after/ftplugin/)





根据需要下载 





配置对应django_model_snippets.vim之后 





input "mmodel" and then press "TAB", you will see "mmodel" is expanded to 





class (models.Model): 





"""<{}>""" 





<{}> = <{}>





class Admin: 





pass 





def __str__(self): 





return "<{s}>" % <{s}>





<{}>





<{}> is the default placeholder. By pressing the "TAB", you are able to jump from one placeholder to the next. 





上面几行直接引用英文原文了,懒,明白就可以了 





Ctags 





Ctags是一个用于生成tags文件的软件。 





下载地址：[http://ctags.sourceforge.net](http://ctags.sourceforge.net/)。 





linux版下载进行解压编译安装即可。 





Win版本解压后在命令行下运行ctags.exe 就行 





通常放在全局环境变量指向的目录下 





通常做法,只要拷贝出ctags.exe这个文件，把它放在vim安装目录下 





打开你的_vimrc文件加入： 





filetype onlet Tlist_Ctags_Cmd = 'ctags.exe' 





PS:这里补充一句,有时候cmd下运行命令说找不到路径/文件 





那么请把那个文件的目录加到系统环境变量中, 





这些很简单,实在不懂就google一下了 





具体用法搜索一下吧,不说了 





Taglist 





Taglist是一个vim的源代码浏览插件 





"Tag List"有以下一些特点:  
* 在Vim的一个垂直或水平的分割窗口中显示一个文件中定义的tags(函数, 类, 结构,  
变量, 等)  
* 在GUI Vim中, 可以选择把tags显示在下拉菜单和弹出菜单中  
* 当你在多个源文件/缓冲区间切换时, taglist窗口会自动进行相应地更新.  
当你打开新文件时, 新文件中定义的tags会被添加到已经存在的文件列表中,  
并且所有文件中定义的tags会以文件名来分组显示  
* 当你在taglist窗口中选中一个tag名时, 源文件中的光标会自动跳转到该tag的定  
义处  
* 自动高亮当前的tag名  
* 按类型分组各tag, 并且将各组显示在一个可折叠的树形结构中  
* 可以显示tag的原始类型和作用域  
* 在taglist窗口可选择显示tag的原始类型替代tag名  
* tag列表可以按照tag名, 或者时间进行排序  
* 支持以下语言的源文件: Assembly, ASP, Awk, Beta, C,  
C++, C#, Cobol, Eiffel, Erlang, Fortran, HTML, Java, Javascript, Lisp,  
Lua, Make, Pascal, Perl, PHP, Python, Rexx, Ruby, Scheme, Shell, Slang,  
SML, Sql, TCL, Verilog, Vim and Yacc.  
* 可以很简单的扩展支持新的语言. 对新语言支持的修改也很简单.  
* 提供了一些函数, 可以用来在Vim的状态栏或者在窗口的标题栏显示当前的tag名  
* taglist中的文件和tags的列表可以在被保存和在vim会话间加载  
* 提供了一些用来取得tag名和原始类型的命令  
* 在控制台vim和GUI vim中都可以使用  
* 可以和winmanager插件一起使用. winmanager插件可以让你同时使用文件浏览器,  
缓冲区浏览器和taglist插件, 就像一个IDE一样.  
* 可以在Unix和MS-Windows系统中使用 





下载 





[http://vim.sourceforge.net/scripts/script.php?script_id=273](http://vim.sourceforge.net/scripts/script.php?script_id=273)





安装 





将Taglist解压得到的目录中的taglist.vim复制到vim的plugin目录中 





其实学习,需要互相交流才会提高, 





这里顺便帮朋友免费广告, 





J2EE群 47700209 





Python群 24683344 ß这群记得说是啊俊介绍,哈哈 





最后分享一下学习资料 





Django [http://www.djangobook.com/](http://www.djangobook.com/)





[http://www.woodpecker.org.cn/obp/django/django-stepbystep/newtest/doc/](http://www.woodpecker.org.cn/obp/django/django-stepbystep/newtest/doc/)





Python [http://www.woodpecker.org.cn/diveintopython/](http://www.woodpecker.org.cn/diveintopython/)





还有几十本python英文版资料,有机会打包上传



