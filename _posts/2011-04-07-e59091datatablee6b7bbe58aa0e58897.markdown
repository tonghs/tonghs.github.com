---
author: ths
comments: true
date: 2011-04-07 01:49:00+00:00
layout: post
slug: '%e5%90%91datatable%e6%b7%bb%e5%8a%a0%e5%88%97'
title: 向DataTable添加列
wordpress_id: 598
categories:
- 技术
tags:
- DataTable
---

DataTable dt=<span style="color: blue">new </span>DataTable(<span style="color: #a31515">"cart"</span>);
       DataColumn dc1=<span style="color: blue">new </span>DataColumn(<span style="color: #a31515">"prizename"</span>,Type.GetType(<span style="color: #a31515">"System.String"</span>));
       DataColumn dc2=<span style="color: blue">new </span>DataColumn(<span style="color: #a31515">"point"</span>,Type.GetType(<span style="color: #a31515">"System.Int16"</span>));
       DataColumn dc3=<span style="color: blue">new </span>DataColumn(<span style="color: #a31515">"number"</span>,Type.GetType(<span style="color: #a31515">"System.Int16"</span>));
       DataColumn dc4=<span style="color: blue">new </span>DataColumn(<span style="color: #a31515">"totalpoint"</span>,Type.GetType(<span style="color: #a31515">"System.Int64"</span>));
       DataColumn dc5=<span style="color: blue">new </span>DataColumn(<span style="color: #a31515">"prizeid"</span>,Type.GetType(<span style="color: #a31515">"System.String"</span>));
       dt.Columns.Add(dc1);
       dt.Columns.Add(dc2);
       dt.Columns.Add(dc3);
       dt.Columns.Add(dc4);
       dt.Columns.Add(dc5);
    <span style="color: green">//以上代码完成了DataTable的构架，但是里面是没有任何数据的
       </span><span style="color: blue">for</span>(<span style="color: blue">int </span>i=0;i<10;i++)
       {
        DataRow dr=dt.NewRow();
        dr[<span style="color: #a31515">"prizename"</span>]=<span style="color: #a31515">"娃娃"</span>;
        dr[<span style="color: #a31515">"point"</span>]=10;
        dr[<span style="color: #a31515">"number"</span>]=1;
        dr[<span style="color: #a31515">"totalpoint"</span>]=10;
        dr[<span style="color: #a31515">"prizeid"</span>]=<span style="color: #a31515">"001"</span>;
        dt.Rows.Add(dr);
       }
    <span style="color: green">//填充了10条相同的记录进去
    
    </span>有人会这么做
    DataRow dr=<span style="color: blue">new </span>DataRow();
      ..
    dt.Rows.Add(dr);
    这样是不行的，因为一个DataRow必定是属于一个DataTable的，不能凭空建立，就好比一条记录一定是属于一个表一样
    
    又有人这么做
        DataRow dr=dt.NewRow();
        dr[<span style="color: #a31515">"prizename"</span>]=<span style="color: #a31515">"娃娃"</span>;
        dr[<span style="color: #a31515">"point"</span>]=10;
        dr[<span style="color: #a31515">"number"</span>]=1;
        dr[<span style="color: #a31515">"totalpoint"</span>]=10;
        dr[<span style="color: #a31515">"prizeid"</span>]=<span style="color: #a31515">"001"</span>;
       <span style="color: blue">for</span>(<span style="color: blue">int </span>i=0;i<10;i++)
       {
             dt.Rows.Add(dr);
       }
    这样做同样是错误的，因为DataTable已经有这条DataRow了，就好比一个表中不可能存在2条一样的记录，必须每次NewRow()
    



