---
author: ths
comments: true
date: 2010-12-27 09:06:00+00:00
layout: post
slug: '%e5%87%8c%e9%98%b361%e5%8d%95%e7%89%87%e6%9c%baadc%e4%b8%8e%e8%af%ad%e9%9f%b3%e5%af%84%e5%ad%98%e5%99%a8%e5%86%b2%e7%aa%81%e9%97%ae%e9%a2%98'
title: 凌阳61单片机ADC与语音寄存器冲突问题
wordpress_id: 425
categories:
- 技术
tags:
- '61'
- ADC
- 冲突
- 凌阳
- 寄存器
---

最近在用凌阳61单片机做课设的时候用到语音和温度采集，遇到这样一个问题，在播放语音前温度显示正常，但是语音播放后温度显示不正常了，跳动非常快，而且没准是多少度，从2摄氏度到34摄氏度都有，很纠结，网上也很少这样的问题，于是专门找出一晚上时间，上凌阳论坛上搜索，那晚把凌阳的论坛几乎翻了个底朝天，最终还是找到了解决方法，一位朋友跟我遇到的问题差不多，二楼的回复解决了我的问题。





原因是P_DAC_Ctrl寄存器冲突  

解决方法是，在使能A/D前面加上一句：  

*P_DAC_Ctrl &= 0xffe7;        // 把B4、B3设置为00，如果其他部分程序没有问题，就应该能避免这个问题。



